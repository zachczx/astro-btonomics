---
import Layout from '../layouts/Layout.astro'
import MaterialCalendarMonthOutline from '../components/svg/MaterialCalendarMonthOutline.astro'
import FormattedDate from '../components/FormattedDate.astro'
import { getCollection } from 'astro:content'

const allHonestReviewsPosts = await getCollection('blog', ({ id }) => {
    return id.startsWith('honestReviews')
})
const allShoppingPosts = await getCollection('blog', ({ id }) => {
    return id.startsWith('shopping')
})
const allMaintenancePosts = await getCollection('blog', ({ id }) => {
    return id.startsWith('maintenance')
})
const allGeneralPosts = await getCollection('blog', ({ id }) => {
    return id.startsWith('general')
})
---

<Layout title="Home">
    <main class="flex justify-center">
        <div class="grid grid-cols-2 gap-10">
            <div class="space-y-4">
                <h2>Honest Reviews</h2>
                {
                    allHonestReviewsPosts.map((entry) => (
                        <div class="bg-base-200 p-4">
                            <a href={entry.slug}>
                                <h3 class="text-primary">{entry.data.title}</h3>
                                <div class="flex items-center stroke-gray-300 text-gray-500">
                                    <MaterialCalendarMonthOutline class="mb-1 me-1" />
                                    <FormattedDate date={entry.data.pubDate} />
                                </div>
                                <p class="truncate">{entry.body}</p>
                            </a>
                        </div>
                    ))
                }
            </div>
            <div class="space-y-4">
                <h2>Shopping</h2>
                {
                    allShoppingPosts.map((entry) => (
                        <div class="bg-base-200 p-4">
                            <a href={entry.slug}>
                                <h3 class="text-primary">{entry.data.title}</h3>
                                <div class="flex items-center stroke-gray-300 text-gray-500">
                                    <MaterialCalendarMonthOutline class="mb-1 me-1" />
                                    <FormattedDate date={entry.data.pubDate} />
                                </div>
                                <p class="truncate">{entry.body}</p>
                            </a>
                        </div>
                    ))
                }
            </div>
            <div class="space-y-4">
                <h2>Maintenance</h2>
                {
                    allMaintenancePosts.map((entry) => (
                        <div class="bg-base-200 p-4">
                            <a href={entry.slug}>
                                <h3 class="text-primary">{entry.data.title}</h3>
                                <div class="flex items-center stroke-gray-300 text-gray-500">
                                    <MaterialCalendarMonthOutline class="mb-1 me-1" />
                                    <FormattedDate date={entry.data.pubDate} />
                                </div>
                                <p class="truncate">{entry.body}</p>
                            </a>
                        </div>
                    ))
                }
            </div>
            <div class="space-y-4">
                <h2>General</h2>
                {
                    allGeneralPosts.map((entry) => (
                        <div class="bg-base-200 p-4">
                            <a href={entry.slug}>
                                <h3 class="text-primary">{entry.data.title}</h3>
                                <div class="flex items-center stroke-gray-300 text-gray-500">
                                    <MaterialCalendarMonthOutline class="mb-1 me-1" />
                                    <FormattedDate date={entry.data.pubDate} />
                                </div>
                                <p class="truncate">{entry.body}</p>
                            </a>
                        </div>
                    ))
                }
            </div>
        </div>
    </main>
</Layout>
